<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="ui.ProfileController"
      alignment="CENTER"
      spacing="24"
      stylesheets="@stylesheet.css"
      styleClass="wrapper">

    <!-- Content container -->
    <VBox alignment="CENTER_LEFT" maxWidth="600" spacing="20">
        <children>

            <!-- Title -->
            <Label text="Profile" styleClass="title"/>

            <!-- Header row: avatar + basic info -->
            <HBox alignment="CENTER_LEFT" spacing="20">
                <children>

                    <!-- Avatar with circular clip -->
                    <ImageView fx:id="avatar"
                               fitWidth="120" fitHeight="120"
                               preserveRatio="true">
                        <image>
                            <Image url="@profile.png" />
                        </image>
                        <clip>
                            <Circle radius="60" centerX="60" centerY="60"/>
                        </clip>
                    </ImageView>

                    <!-- Name / Email / Bio -->
                    <VBox spacing="6">
                        <children>
                            <Label fx:id="nameLbl" text="Guest"/>
                            <Label fx:id="emailLbl" text="—"/>
                            <Label fx:id="bioLbl" text="I love solving math problems!!"/>
                        </children>
                    </VBox>
                </children>
            </HBox>

            <Separator/>

            <!-- Account -->
            <VBox spacing="10">
                <children>
                    <Label text="Account" styleClass="section-title"/>
                    <HBox spacing="10">
                        <children>
                            <Button text="Change Email" onAction="#onChangeEmail" styleClass="btn"/>
                            <Button text="Change Password" onAction="#onChangePassword" styleClass="btn"/>
                            <Pane HBox.hgrow="ALWAYS"/>
                            <Button text="Delete Account" onAction="#onDeleteAccount" styleClass="btn"/>
                        </children>
                    </HBox>
                </children>
            </VBox>

            <!-- Preferences (aligned with GridPane) -->
            <VBox spacing="12">
                <children>
                    <Label text="Preferences" styleClass="section-title"/>

                    <GridPane hgap="12" vgap="12">
                        <columnConstraints>
                            <!-- Right-align labels; controls column grows -->
                            <ColumnConstraints halignment="RIGHT" minWidth="110"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                        </columnConstraints>
                        <children>
                            <!-- Row 0: Language -->
                            <Label text="Language:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                            <ComboBox fx:id="languageBox"
                                      prefWidth="180"
                                      GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                            <!-- Row 1: Accessibility checkbox aligned under controls column -->
                            <CheckBox fx:id="accessibilityBox"
                                      text="Accessibility Mode"
                                      GridPane.rowIndex="1" GridPane.columnIndex="1"
                                      GridPane.halignment="LEFT"/>
                        </children>
                    </GridPane>
                </children>
            </VBox>

            <!-- Game stats -->
            <VBox spacing="10" alignment="CENTER_LEFT">
                <children>
                    <Label text="Game Stats" styleClass="section-title"/>
                    <ProgressBar fx:id="progressBar" progress="0.5" styleClass="progress-wide"/>
                    <Label fx:id="levelLbl" text="⭐ Level 5"/>
                </children>
            </VBox>

            <!-- Status -->
            <Label fx:id="status" text=""/>

        </children>
        <padding>
            <Insets top="24" right="24" bottom="24" left="24"/>
        </padding>
    </VBox>

</VBox>
